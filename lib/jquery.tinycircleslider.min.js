/*! Tiny Circleslider - v2.0.6 - 2015-01-23
 * http://www.baijs.com/tinycircleslider
 *
 * Copyright (c) 2015 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(b,e){function f(){return u.options.dotsSnap&&k(),v.append(w.first().clone()).css("width",A.width*(w.length+1)),g(),u.move(0,u.options.interval),u}function g(){var c=G?"touchstart":"mousedown";G?(b[0].ontouchstart=t,b[0].ontouchmove=q,b[0].ontouchend=s):x.bind(c,t),u.options.dotsSnap&&b.delegate(".dot",c,function(b){return b.preventDefault(),b.stopImmediatePropagation(),clearTimeout(D),0===F&&u.move(a(this).text()-1),u.start(),!1})}function h(a){D=setTimeout(function(){u.move(void 0!==w[u.slideCurrent+1]?u.slideCurrent+1:0,!0)},a?50:u.options.intervalTime)}function i(a){return a*(Math.PI/180)}function j(a){return 180*a/Math.PI}function k(){var c=document.createDocumentFragment();y.remove(),w=w.remove(),w.each(function(b,d){var e=y.clone(),f=u.options.dots?360*b/w.length:parseInt(a(d).attr("data-degrees"),10),g={top:-Math.cos(i(f))*u.options.radius+z.height/2-C.height/2,left:Math.sin(i(f))*u.options.radius+z.width/2-C.width/2};e.addClass(a(d).attr("data-classname")).css(g),u.dots.push({angle:f,slide:d,dot:e}),c.appendChild(e[0])}),u.dots.sort(function(a,b){return a.angle-b.angle}),a.each(u.dots,function(b,c){a(c.dot).addClass("dot-"+(b+1)).html("<span>"+(b+1)+"</span>"),v.append(c.slide)}),b.append(c),y=b.find(".dot")}function l(a,b){var c,d,e;return a>b?(c=a-b,d=-(b+360-a)):(c=a+360-b,d=-(b-a)),e=c<Math.abs(d)?c:d,[e,d,c]}function m(b){var c=9999,d=9999,e=9999,f=0,g=0,h=0;return a.each(u.dots,function(a,i){var j=l(i.angle,b);Math.abs(j[0])<Math.abs(e)&&(e=j[0],h=a),Math.abs(j[1])<Math.abs(c)&&(c=j[1],f=a),Math.abs(j[2])<Math.abs(d)&&(d=j[2],g=a)}),[[h,f,g],[e,c,d]]}function n(a){return 0>a?360+a%-360:a%360}function o(a,b,c,d){F+=1;var e=n(Math.round(F*a+u.angleCurrent));F===c&&d&&u.start(),r(e,F===c),c>F?E=setTimeout(function(){o(a,b,c,d)},50):(F=0,u.angleCurrent=b)}function p(a){return{x:H?a.targetTouches[0].pageX:a.pageX||a.clientX,y:H?a.targetTouches[0].pageY:a.pageY||a.clientY}}function q(a){var c=b.offset(),d={left:p(a).x-c.left-z.width/2,top:p(a).y-c.top-z.height/2};return u.angleCurrent=n(j(Math.atan2(d.left,-d.top))),r(u.angleCurrent),!1}function r(a,c){u.options.dots?v.css("left",-(a/360*A.width*w.length)):(closestSlidesAndAngles=m(a),closestSlides=_closestSlidesAndAngles[0],closestAngles=_closestSlidesAndAngles[1],v.css("left",-(closestSlides[1]*A.width+Math.abs(closestAngles[1])*A.width/(Math.abs(closestAngles[1])+Math.abs(closestAngles[2]))))),x.css({top:-Math.cos(i(a))*u.options.radius+(z.height/2-B.height/2),left:Math.sin(i(a))*u.options.radius+(z.width/2-B.width/2)}),c&&b.trigger("move",[w[u.slideCurrent],u.slideCurrent])}function s(b){return a(b.target).hasClass("dot")?!1:(b.preventDefault(),clearTimeout(E),G||(a(document).unbind("mousemove mouseup"),x.unbind("mouseup")),u.options.dotsSnap&&(u.options.dotsHide&&y.stop(!0,!0).fadeOut("slow"),u.move(m(u.angleCurrent)[0][0])),u.start(),void 0)}function t(b){return b.preventDefault(),H="touchstart"==b.type,a(b.target).hasClass("dot")?!1:(clearTimeout(D),G||(a(document).mousemove(q),a(document).mouseup(s),x.mouseup(s)),u.options.dotsSnap&&u.options.dotsHide&&y.stop(!0,!0).fadeIn("slow"),void 0)}this.options=a.extend({},d,e),this._defaults=d,this._name=c;var u=this,v=(b.find(".viewport"),b.find(".overview")),w=v.children(),x=b.find(".thumb"),y=b.find(".dot"),z=(w.find("a"),{width:b.outerWidth(!0),height:b.outerHeight(!0)}),A={width:w.first().outerWidth(!0),height:w.first().outerHeight(!0)},B={width:x.outerWidth(!0),height:x.outerHeight(!0)},C={width:y.outerWidth(),height:y.outerHeight()},D=null,E=null,F=0,G="ontouchstart"in document.documentElement,H=!1;return this.dots=[],this.slideCurrent=0,this.angleCurrent=10,this.slidesTotal=w.length,this.intervalActive=!1,this.start=function(a){return u.options.interval&&(u.intervalActive=!0,h(a)),u},this.stop=function(){return u.intervalActive=!1,clearTimeout(D),u},this.move=function(a,b){var c=Math.max(0,a||u.slideCurrent);c>=u.slidesTotal&&(c=0);var d=u.dots[c]&&u.dots[c].angle||0,e=l(d,u.angleCurrent)[0],f=Math.ceil(Math.abs(e)/10),g=e/f;return u.slideCurrent=c,o(g,d,f,b),u},f()}var c="tinycircleslider",d={interval:!1,intervalTime:3500,dots:!0,dotsSnap:!1,dotsHide:!0,radius:140};a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(a(this),d))})}});